<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sebuah Pesan Spesial untukmu...</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Playfair+Display:ital,wght@0,400;1,700&display=swap" rel="stylesheet">
    
    <style>
        /* -------------------------- */
        /* GLOBAL STYLING & BACKGROUND */
        /* -------------------------- */
        :root {
            --dark-blue: #2c3e50;
            --off-white: #f5f0e1; /* Kertas agak kekuningan */
            --paper-cream: #fff9e6;
            --envelope-main: #d4a373; /* Cokelat tanah */
            --envelope-flap: #b5845c; /* Lebih gelap dari main */
            --seal-red: #c0392b;
            --gold-accent: #f1c40f;
            --text-dark: #3e2723;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;    
            min-height: 100vh;
            background: linear-gradient(135deg, #1a2a3a 0%, #3a4a5a 100%); /* Gradien gelap */
            font-family: 'Playfair Display', serif;
            color: var(--off-white);
            margin: 0;
            padding: 20px;
            position: relative; 
            overflow-x: hidden; /* Mencegah scroll horizontal */
        }

        /* Efek noise background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj4KICA8ZmlsdGVyIGlkPSJuIj4KICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjciIG51bU9jdGF2ZXM9IjIiIHN0aXRjaFRpbGVzPSJub1N0aXRjaCIvPgogICAgPGZlQ29sb3JNYXRyaXsgdHlwZT0iYmlydGhuZXNzIiB2YWx1ZXM9IjAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC42IDAgMC4

        /* -------------------------- */
        /* ENVELOPE (AMPLOP) DESAIN */
        /* -------------------------- */
        #envelope {
            width: 280px;
            height: 180px;
            background-color: #d8c3a5; /* Warna kertas tua */
            border: 2px solid #b8a385;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            transition: all 0.5s ease-out; 
            z-index: 10;
        }

        /* Lipatan Segitiga */
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background-color: #a8947c; 
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            z-index: 11;
        }

        /* Seal */
        .envelope-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 35px;
            height: 35px;
            background-color: #c0392b; 
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
            z-index: 12;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.2em;
        }

        .click-text {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: #f1c40f;
            font-style: italic;
            font-size: 0.9em;
            opacity: 0.8;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.3; }
        }

        /* Animasi Hilang Amplop */
        #envelope.hide {
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            pointer-events: none;
            height: 0; 
            margin-bottom: -180px; 
        }
        
        /* -------------------------- */
        /* LETTER (ISI SURAT) STYLING */
        /* -------------------------- */
        .letter-container {
            width: 90%;
            max-width: 650px;
            background-color: #fff9e6; 
            padding: 40px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3), 
                        0 0 10px rgba(0, 0, 0, 0.1) inset; 
            opacity: 0; 
            transition: opacity 1.5s ease;
            text-align: left;
            pointer-events: none;
            margin-top: -180px; 
            
            /* PERBAIKAN SCROLL */
            max-height: 80vh; 
            overflow-y: auto; 
        }

        .letter-container.open {
            opacity: 1; 
            pointer-events: auto;
        }
        
        #letter-text {
            font-family: 'Cutive Mono', monospace; /* FONT TYPEWRITER */
            color: #3e2723; /* Tinta cokelat tua */
            font-size: 1.1em; 
            line-height: 1.8;
            white-space: pre-wrap;
            min-height: 350px; /* Memastikan ada ruang untuk teks */
        }
        
        .signature {
            display: block;
            margin-top: 50px;
            text-align: right;
            font-size: 1.3em; 
            font-weight: 700;
            font-family: 'Cutive Mono', monospace;
        }
        
        /* Cursor untuk Efek Ketikan */
        #typing-cursor {
            display: inline-block;
            width: 3px;
            height: 1.5em;
            background-color: #3e2723;
            margin-left: 2px;
            vertical-align: middle;
            animation: blink-caret 0.75s step-end infinite;
        }

        @keyframes blink-caret {
            from, to { background-color: transparent; }
            50% { background-color: #3e2723; }
        }
        
        /* Styling untuk Audio Control */
        #audio-controls {
            position: fixed;
            bottom: 0px; 
            left: 50%;
            transform: translateX(-50%);
            width: 90%; 
            max-width: 400px; 
            padding: 10px;
            z-index: 100;
            display: none; /* Sembunyikan dulu */
        }
        
        #audio-controls.visible {
            display: block;
        }

    </style>
</head>
<body>

    <h1 id="main-title">i hope u read this, even if it's too late</h1>

    <div id="envelope">
        <div class="envelope-flap"></div>
        <div class="envelope-seal">ðŸ’Œ</div>
        <div class="click-text">read it</div>
    </div>

    <div class="letter-container" id="letter-container">
        <p id="letter-text"></p>
        <span id="typing-cursor"></span>
    </div>
    
    <div id="audio-controls">
        <p style="color: white; font-size: 0.8em; margin: 0 0 5px 0; text-align: center; font-family: 'Playfair Display', serif;">Now Playing: The 1975 - About You</p>
        
        <iframe data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/track/1fDFHXcykq4iw8Gg7s5hG9?utm_source=generator&theme=0" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
    </div>

    <script>
        // ISI PESAN
        const confessionContent = 
            "Selamat ulang tahun, Raaaa! \n\n" +
            "Aku liat, tahun ini kamu fokus penuh sama perjalanan buat nemuin versi terbaik dirimu. Memilih untuk mengambil waktu, fokus penuh, dan berjuang keras sendirian itu adalah keputusan dewasa yang keren, dan aku salut banget sama keberanian kamu. Aku menghargai penuh jalan yang sedang kamu tempuh saat ini.\n\n" +
            "Jujur, kalau dibilang gampang, ya nggak. Aku masih menyimpan sisa-sisa kebingungan kenapa kita harus ambil jeda saat kamu sedang hadapi tantangan yang segede ini. Kadang terlintas, kenapa nggak grow up bareng aja, ya? Tapi, aku paham. Setiap orang punya cara dan waktunya sendiri untuk menata hati dan meraih peace yang dibutuhkan.\n\n" +
            "Ada banyak obrolan dan tawa ringan yang rasanya tiba-tiba hilang di tengah jalan, seperti komunikasi yang putus mendadak. Dan ya, kerinduan akan momen-momen itu masih ada. Itu wajar.\n\n" +
            "Aku cuma mau kamu pegang satu hal: kebahagiaan itu sepenuhnya tanggung jawabmu. Fokuslah dulu pada dirimu dan semua perjuangan berat yang lagi kamu hadapi sekarang.\n\n" +
            "Aku berharap, setelah semua ini selesai, kamu akan kembali menjadi Rahma yang jauh lebih kuat, lebih utuh, lebih bahagia, dan yang paling penting, siap tertawa lepas lagi seperti dulu. Semoga kamu selalu dikelilingi hal-hal baik di Bandung maupun di mana pun kamu berada.\n\n" +
            "Doa terbaik selalu untukmu. Take care, and shine brighter than ever.";

        const mainTitle = document.getElementById('main-title'); 
        const envelope = document.getElementById('envelope');
        const letterContainer = document.getElementById('letter-container');
        const letterDisplay = document.getElementById('letter-text');
        const typingCursor = document.getElementById('typing-cursor');
        const audioControls = document.getElementById('audio-controls'); 

        let charIndex = 0;
        let typingInterval;

        function typeWriter() {
            if (charIndex < confessionContent.length) {
                // Tambahkan karakter
                letterDisplay.innerHTML += confessionContent.charAt(charIndex);
                charIndex++;
            } else {
                clearInterval(typingInterval);
                typingCursor.style.display = 'none'; 
                // Tambahkan Signature setelah efek ketikan selesai
                letterDisplay.innerHTML += '<span class="signature">Dari Hatiku</span>';
            }
        }

        envelope.addEventListener('click', () => {
            // Sembunyikan judul utama
            mainTitle.classList.add('hidden');

            // Animasi: Amplop menghilang
            envelope.classList.add('hide'); 
            
            // Tampilkan container surat dengan efek fade-in
            setTimeout(() => {
                letterContainer.classList.add('open'); 
                audioControls.classList.add('visible'); // Tampilkan kontrol Spotify
                
                // Tunggu sebentar sebelum memulai efek ketikan
                setTimeout(() => {
                    typingCursor.style.display = 'inline-block'; 
                    typingInterval = setInterval(typeWriter, 80); 
                }, 1000); 
            }, 500); 
        });
    </script>

</body>
</html>
